## 1. データベース基盤のセットアップ

- [x] 1.1 `golang-migrate` の導入と Docker Compose への統合
- [x] 1.2 初期マイグレーションファイルの作成 (account_categories マスタ)
- [x] 1.3 データベース接続設定の共通化 (internal/infrastructure/persistence/db.go)

## 2. マスターデータの実装

- [x] 2.1 勘定科目カテゴリ (account_categories) の初期データ投入 SQL 作成
- [x] 2.2 取引先マスタ (partners) のテーブル定義とリポジトリ実装 (世代管理対応)
- [x] 2.3 勘定科目マスタ (account_items) のテーブル定義とリポジトリ実装 (世代管理・カテゴリ連携)

## 3. 仕訳データの不変実装

- [x] 3.1 仕訳ヘッダー (journal_entries) および明細 (journal_lines) のテーブル定義
- [x] 3.2 データベースレベルの不変ガードレール (UPDATE/DELETE 禁止トリガー) の実装
- [x] 3.3 仕訳保存リポジトリの実装 (トランザクション制御および不変性テスト)

## 4. ドメイン層・ユースケース層の調整

- [x] 4.1 ドメインエンティティへの不変性・世代管理ロジックの反映
- [x] 4.2 仕訳登録ユースケースの実装 (貸借一致バリデーション含む)
- [x] 4.3 修正仕訳 (赤黒処理) のためのドメインロジック実装

## 5. 統合テストと検証

- [x] 5.1 Docker 環境での結合テスト実行による不変性（トリガー）の検証
- [x] 5.2 カバレッジ要件 (Core 100% / Overall 90%) の確認
- [x] 5.3 OpenSpec verify による要件充足の確認
