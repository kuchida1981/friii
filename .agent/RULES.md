# AI Agent 開発ルール

このプロジェクトでは、Gemini CLI や Claude Code などの AI エージェントが開発を行う際の厳格なルールを定めます。

## 1. イシュードリブン開発 (Issue Driven)

- **全ての作業は GitHub Issue に基づく**: いかなるコード変更も、対応する Issue が存在しなければなりません。
- **Issue の確認**: ユーザーから Issue 番号が提示されない場合、必ず「どの Issue に対応しますか？」と尋ねてください。既存の Issue がない場合は「新しい Issue を作成しますか？」と提案してください。
- **PR と Issue の紐付け**: プルリクエストを作成する際は、必ず説明文（Body）に `Closes #<Issue番号>` または `Fixes #<Issue番号>` を含めてください。

## 2. プルリクエストの作成運用

- **Draft PR での作成**: プルリクエストは必ず **Draft (下書き)** モードで作成してください。
  - 理由: 不要な GitHub Actions の実行を抑え、クレジット消費を削減するためです。
- **動作確認チェックリスト**: PR の説明文には、ユーザーが動作確認を行うための **Todo リスト** を必ず設けてください。
- **PR オープンのタイミング**: ユーザーが動作確認を行い、OpenSpec アーティファクトのアーカイブが完了した後に、ユーザー（またはユーザーの指示を受けたエージェント）が PR を Ready for Review に変更します。

## 3. 品質管理

- **テストとカバレッジ**: `DEVELOPMENT.md` に記載されたカバレッジ閾値（Core 100% / Overall 90%）を厳守してください。
- **OpenSpec**:
  - 機能変更の際は OpenSpec のワークフロー（new -> apply -> verify -> archive）を遵守してください。
  - **コミット前チェック (重要)**: `pre-commit` には含まれていないため、全てのコミットの前に、AI エージェントは必ず `openspec validate --strict --all` を手動で実行し、エラーがないことを確認してください。
