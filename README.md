# friii (フリー) - 優良電子帳簿対応 会計システム

## プロジェクトビジョン
**「エンジニアが、エンジニアのために作る、75万円控除を勝ち取るための会計システム」**

本プロジェクトは、青色申告特別控除（最大75万円）の要件である「優良な電子帳簿」に対応した、フリーランスエンジニア向けの会計管理システムです。既存の汎用会計ソフトの複雑さを排し、エンジニアのワークフローに最適化されたシンプルかつ堅牢な設計を目指します。

---

## 1. 優良な電子帳簿への対応方針
75万円控除を受けるための「優良な電子帳簿」要件を、技術的に以下の通り解決します。

- **訂正・削除履歴の確保**: データベースレベルで `UPDATE` / `DELETE` を禁止。修正はすべて「赤黒処理（取消仕訳）」による新規レコード追加で行います。
- **相互関連性の確保**: 仕訳、勘定科目、取引先、監査ログを相互にリンクし、発生源まで追跡可能にします。
- **検索機能の確保**: 取引日、金額、取引先、勘定科目による範囲指定・複合条件検索を実装します。
- **監査ログの自動生成**: 全てのデータ作成・無効化イベントをタイムスタンプ付きで自動記録します。

## 2. 主要機能
- **不変性複式簿記エンジン**: 貸借一致バリデーションを備えた堅牢な仕訳管理。
- **フリーランス特化入力**: 現金取引を想定しない、振替伝票形式のミニマルな入力インターフェース。
- **財務諸表生成**: e-Tax申告に必要な損益計算書 (PL)、貸借対照表 (BS)、および総勘定元帳の生成。
- **取引先管理**: インボイス制度を見据えた登録番号保持と、取引先ごとの売上分析。
- **年度末処理**: 翌年度への残高繰越機能。

## 3. 技術スタック
- **Backend**: Go (Clean Architecture 採用)
- **API**: GraphQL (gqlgen による型安全なインターフェース)
- **Frontend**: React + TypeScript (Vite)
- **Database**: PostgreSQL (履歴保持を重視したスキーマ設計)
- **Infrastructure**: Docker Compose によるローカル完結型環境

## 4. 開発ロードマップ

### Phase 1: 設計と基盤整備（完了）
- [x] 全体アーキテクチャの定義
- [x] 「優良な電子帳簿」要件の仕様化
- [x] 実装タスクの洗い出し

### Phase 2: バックエンド・コア実装
- [ ] Docker Compose 環境の構築
- [ ] 会計ドメインモデル（仕訳・勘定科目）の実装
- [ ] 不変性を担保するデータ永続化層の実装
- [ ] 監査ログ自動生成メカニズムの構築

### Phase 3: レポート出力とフロントエンド実装
- [ ] BS / PL 集計ロジックの実装
- [ ] 振替伝票形式の入力 UI の構築
- [ ] 財務レポート表示画面の実装

### Phase 4: 品質担保と運用整備
- [ ] 簿記ルールのユニットテスト拡充
- [ ] CI / CD パイプラインの整備
- [ ] e-Tax 入力補助ドキュメントの作成

---

## 開発の進め方
本プロジェクトは **OpenSpec** ワークフローに従って管理されています。設計の詳細は `openspec/changes/` 配下のアーティファクトを参照してください。
